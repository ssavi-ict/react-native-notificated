"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[281],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||r;return n?i.createElement(h,o(o({ref:t},c),{},{components:n})):i.createElement(h,o({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3274:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var i=n(7462),a=n(3366),r=(n(7294),n(3905)),o=["components"],l={sidebar_position:6},s="\ud83d\udd25 Redux example",p={unversionedId:"examples/redux-example",id:"examples/redux-example",title:"\ud83d\udd25 Redux example",description:"This example is quite different from the previous ones.",source:"@site/docs/examples/redux-example.md",sourceDirName:"examples",slug:"/examples/redux-example",permalink:"/react-native-notificated/docs/examples/redux-example",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/examples/redux-example.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"\ud83e\udeb6 Custom examples",permalink:"/react-native-notificated/docs/examples/custom-examples"}},c=[{value:"Redux Example component",id:"redux-example-component",children:[{value:"Visualisation",id:"visualisation",children:[],level:3}],level:2},{value:"Store",id:"store",children:[],level:2},{value:"Hooks",id:"hooks",children:[],level:2},{value:"Reducers",id:"reducers",children:[],level:2},{value:"Login Form",id:"login-form",children:[],level:2},{value:"Incorrect Login",id:"incorrect-login",children:[],level:2},{value:"Incorrect Password",id:"incorrect-password",children:[],level:2},{value:"You have successfully logged in",id:"you-have-successfully-logged-in",children:[],level:2}],u={toc:c};function d(e){var t=e.components,l=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"-redux-example"},"\ud83d\udd25 Redux example"),(0,r.kt)("br",null),(0,r.kt)("p",null,"This example is quite different from the previous ones. ",(0,r.kt)("br",null),"\nOur goal here is to show you how we can use RN Notifications library in real-life, in a more complicated environment.",(0,r.kt)("br",null),"\nFor this reason, we built a dummy login screen.",(0,r.kt)("br",null),"\nIn this example, we use the Redux Toolkit library.",(0,r.kt)("br",null),"\nLet's go step by step through it, and check where exactly notifications were triggered."),(0,r.kt)("h2",{id:"redux-example-component"},"Redux Example component"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"jsx",jsx:!0},"import React from 'react'\nimport { store } from '../redux/store'\nimport { Provider } from 'react-redux'\nimport { LoginForm } from '../components/loginForm/LoginForm'\nimport { createNotifications } from 'react-native-notification'\n\nconst { NotificationsProvider } = createNotifications({\n  isNotch: true,\n})\n\nexport const ReduxExample = () => {\n  return (\n    <Provider store={store}>\n      <NotificationsProvider />\n      <LoginForm />\n    </Provider>\n  )\n}\n")),(0,r.kt)("p",null,"Redux Example is the main component, where we apply redux ",(0,r.kt)("inlineCode",{parentName:"p"},"Provider"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"NotificationsProvider")," and render ",(0,r.kt)("inlineCode",{parentName:"p"},"LoginForm")," component.",(0,r.kt)("br",null)),(0,r.kt)("p",null,"Let's check what happened here:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"we imported ",(0,r.kt)("inlineCode",{parentName:"li"},"React")," (of course), ",(0,r.kt)("inlineCode",{parentName:"li"},"store")," (previously created), redux ",(0,r.kt)("inlineCode",{parentName:"li"},"Provider"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"LoginForm")," component (previously created) and well known ",(0,r.kt)("inlineCode",{parentName:"li"},"createNotifications")),(0,r.kt)("li",{parentName:"ul"},"we didn't pick ",(0,r.kt)("inlineCode",{parentName:"li"},"useNotifications")," hook. Only ",(0,r.kt)("inlineCode",{parentName:"li"},"createNotification"),", because we're not triggering notifications here"),(0,r.kt)("li",{parentName:"ul"},"because ",(0,r.kt)("inlineCode",{parentName:"li"},"NotificationsProvider")," is applied on the same level as ",(0,r.kt)("inlineCode",{parentName:"li"},"LoginForm")," we have access to the notifications inside the form")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"visualisation"},"Visualisation"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Success",src:n(7265).Z})),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"store"},"Store"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"jsx",jsx:!0},"import { configureStore } from '@reduxjs/toolkit'\nimport formReducer from './reducers'\n\nexport const store = configureStore({\n  reducer: {\n    form: formReducer,\n  },\n})\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppDispatch = typeof store.dispatch\n")),(0,r.kt)("p",null,"In the ",(0,r.kt)("inlineCode",{parentName:"p"},"store.ts")," file, we:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"import ",(0,r.kt)("inlineCode",{parentName:"li"},"configureStore")," function, from ",(0,r.kt)("inlineCode",{parentName:"li"},"@reduxjs/toolkit"),". That function is necessary to create the store."),(0,r.kt)("li",{parentName:"ul"},"import ",(0,r.kt)("inlineCode",{parentName:"li"},"formReducer")," (we will describe this function in the next paragraphs)"),(0,r.kt)("li",{parentName:"ul"},"create ",(0,r.kt)("inlineCode",{parentName:"li"},"store")," with ",(0,r.kt)("inlineCode",{parentName:"li"},"configureStore")," function, and pass ",(0,r.kt)("inlineCode",{parentName:"li"},"formReducer")," as a ",(0,r.kt)("inlineCode",{parentName:"li"},"reducer")," there, with a key ",(0,r.kt)("inlineCode",{parentName:"li"},"form")),(0,r.kt)("li",{parentName:"ul"},"export two types: ",(0,r.kt)("inlineCode",{parentName:"li"},"RootState")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"AppDispatch")," which we use to type ",(0,r.kt)("inlineCode",{parentName:"li"},"useDispatch")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"useSelector")," hooks (we will come back to them soon)")),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"hooks"},"Hooks"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"jsx",jsx:!0},"import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\nimport type { RootState, AppDispatch } from './store'\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\n")),(0,r.kt)("p",null,"We're now inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"hooks.ts"),".",(0,r.kt)("br",null),"\nBecause we use ",(0,r.kt)("inlineCode",{parentName:"p"},"typescript"),", we also want to type ",(0,r.kt)("inlineCode",{parentName:"p"},"useDispatch")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"useSelector")," provided by ",(0,r.kt)("inlineCode",{parentName:"p"},"Redux"),".\nThanks to that we received ",(0,r.kt)("inlineCode",{parentName:"p"},"useAppDispatch")," function which is a typed ",(0,r.kt)("inlineCode",{parentName:"p"},"useDispatch")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"useAppSelector")," which is typed ",(0,r.kt)("inlineCode",{parentName:"p"},"useSelector"),"\nWe will use them in the app, instead of using ",(0,r.kt)("inlineCode",{parentName:"p"},"useDispatch")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"useSelector"),"."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"reducers"},"Reducers"),(0,r.kt)("p",null,"This file (",(0,r.kt)("inlineCode",{parentName:"p"},"reducers.ts"),") is most important for us, because we use our ",(0,r.kt)("inlineCode",{parentName:"p"},"notify()")," function here."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"jsx",jsx:!0},"import { createSlice, Dispatch, PayloadAction } from '@reduxjs/toolkit'\nimport { notify } from '../components/loginForm/LoginForm'\n\ntype FormState = {\n  login: string\n  password: string\n}\n\nconst initialState: FormState = {\n  login: '',\n  password: '',\n}\n\nexport const formSlice = createSlice({\n  name: 'form',\n  initialState,\n  reducers: {\n    updateLogin: (state, action: PayloadAction<string>) => {\n      state.login = action.payload\n    },\n    updatePassword: (state, action: PayloadAction<string>) => {\n      state.password = action.payload\n    },\n    submit: (state) => {\n      if (state.login.length < 4) {\n        notify('error', {\n          params: {\n            title: 'Incorrect login',\n            description: 'Login must contain at least 4 characters. ',\n            style: {\n              multiline: 2,\n            },\n          },\n        })\n      }\n      if (state.password.length < 4) {\n        notify('error', {\n          params: {\n            title: 'Incorrect password',\n            description: 'Password must contain at least 4 characters. ',\n            style: {\n              multiline: 2,\n            },\n          },\n        })\n      }\n      notify('success', {\n        params: {\n          title: 'Welcome again',\n          description: 'You have successfully signed in. ',\n          style: {\n            multiline: 2,\n          },\n        },\n      })\n    },\n  },\n})\n\nexport const { updateLogin, updatePassword, submit } = formSlice.actions\n\nexport default formSlice.reducer\n\nexport const fetchUsers = (dispatch: Dispatch) => {\n  setTimeout(() => dispatch(submit()), 2000)\n}\n\n")),(0,r.kt)("p",null,"In this file we:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"import function and types: ",(0,r.kt)("inlineCode",{parentName:"li"},"createSlice"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"Dispatch"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"PayloadAction")," from the ",(0,r.kt)("inlineCode",{parentName:"li"},"@reduxjs/toolkit")),(0,r.kt)("li",{parentName:"ul"},"and the ",(0,r.kt)("inlineCode",{parentName:"li"},"notify()")," function from the ",(0,r.kt)("inlineCode",{parentName:"li"},"LoginForm")," component. Why from there? In our opinion, it belongs there. We just want to use it in the ",(0,r.kt)("inlineCode",{parentName:"li"},"reducers.ts")," file, that's why we have imported it here"),(0,r.kt)("li",{parentName:"ul"},"create the type for our ",(0,r.kt)("inlineCode",{parentName:"li"},"initialState")," (type ",(0,r.kt)("inlineCode",{parentName:"li"},"FormState"),"), and create ",(0,r.kt)("inlineCode",{parentName:"li"},"initialState")," which contains only ",(0,r.kt)("inlineCode",{parentName:"li"},"login")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"password"),", because it's all we need in our simple form"),(0,r.kt)("li",{parentName:"ul"},"create ",(0,r.kt)("inlineCode",{parentName:"li"},"formSlice")," which contains our reducers: ",(0,r.kt)("inlineCode",{parentName:"li"},"updateLogin"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"updatePassword")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"submit"),". ",(0,r.kt)("br",null),"\nThe ",(0,r.kt)("inlineCode",{parentName:"li"},"updateLogin")," and the ",(0,r.kt)("inlineCode",{parentName:"li"},"updatePassword")," are just updaters, which are responsible for our state change, but ",(0,r.kt)("inlineCode",{parentName:"li"},"submit")," is a function that sends our data to the backend (Of course, as we can see, it is not doing that. It's just making simple validation, and check if the login and the password have at least 4 characters but shhh ;) ). ",(0,r.kt)("br",null),"\nIf there is a problem with validation, our ",(0,r.kt)("inlineCode",{parentName:"li"},"error")," notifications are used. If everything is fine, we use ",(0,r.kt)("inlineCode",{parentName:"li"},"success")," notification."),(0,r.kt)("li",{parentName:"ul"},"after that, we just export our reducer function and the reducer itself"),(0,r.kt)("li",{parentName:"ul"},"The last step is to create ",(0,r.kt)("inlineCode",{parentName:"li"},"fetchUsers")," function, which imitates the time we need to get a response from the backend. In fact, we just wrap our ",(0,r.kt)("inlineCode",{parentName:"li"},"submit")," here")),(0,r.kt)("p",null,"This is where we used our ",(0,r.kt)("inlineCode",{parentName:"p"},"notify()")," function. Let's go to the last file: ",(0,r.kt)("inlineCode",{parentName:"p"},"LoginForm")," where we use all of that."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"login-form"},"Login Form"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript",metastring:"jsx",jsx:!0},"import React from 'react'\nimport {\n  NativeSyntheticEvent,\n  SafeAreaView,\n  Text,\n  TextInput,\n  TextInputChangeEventData,\n  TouchableOpacity,\n  View,\n} from 'react-native'\nimport { fetchUsers, updateLogin, updatePassword } from '../../redux/reducers'\nimport { useAppDispatch, useAppSelector } from '../../redux/hooks'\nimport { styles } from './styles'\nimport { createNotifications } from 'react-native-notification'\n\nexport const { notify } = createNotifications()\n\nexport const LoginForm = () => {\n  const login = useAppSelector((state) => state.form.login)\n  const password = useAppSelector((state) => state.form.password)\n  const dispatch = useAppDispatch()\n\n  const handleLoginChange = (e: NativeSyntheticEvent<TextInputChangeEventData>) => {\n    dispatch(updateLogin(e.nativeEvent.text))\n  }\n\n  const handlePasswordChange = (e: NativeSyntheticEvent<TextInputChangeEventData>) => {\n    dispatch(updatePassword(e.nativeEvent.text))\n  }\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <Text style={styles.title}> Sign In </Text>\n      <View style={styles.form}>\n        <Text style={styles.label}>E Mail</Text>\n        <TextInput onChange={handleLoginChange} value={login} style={styles.input} />\n        <Text style={styles.label}>Password</Text>\n        <TextInput\n          onChange={handlePasswordChange}\n          value={password}\n          style={styles.input}\n          secureTextEntry\n        />\n        <TouchableOpacity style={styles.button} onPress={() => fetchUsers(dispatch)}>\n          <Text style={styles.buttonText}>Confirm</Text>\n        </TouchableOpacity>\n      </View>\n    </SafeAreaView>\n  )\n}\n\n")),(0,r.kt)("p",null,"So again at the beginning, we need to import everything we need:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"react native")," components and event"),(0,r.kt)("li",{parentName:"ul"},"our reducers (please remember that ",(0,r.kt)("inlineCode",{parentName:"li"},"fetchUsers")," is in fact ",(0,r.kt)("inlineCode",{parentName:"li"},"submit")," with ",(0,r.kt)("inlineCode",{parentName:"li"},"setTimeout"),")"),(0,r.kt)("li",{parentName:"ul"},"our hooks, because we use them instead of ",(0,r.kt)("inlineCode",{parentName:"li"},"useDispatch")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"useSelector")),(0,r.kt)("li",{parentName:"ul"},"styles (previously prepared)"),(0,r.kt)("li",{parentName:"ul"},"and ",(0,r.kt)("inlineCode",{parentName:"li"},"createNotifications")," to get access to the ",(0,r.kt)("inlineCode",{parentName:"li"},"notify()"))),(0,r.kt)("p",null,"After that we pick and export ",(0,r.kt)("inlineCode",{parentName:"p"},"notify()")," (we're using it in the ",(0,r.kt)("inlineCode",{parentName:"p"},"reducers.ts")," file)."),(0,r.kt)("p",null,"Our ",(0,r.kt)("inlineCode",{parentName:"p"},"LoginForm")," component consists of:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"login")," (that we pull from the state)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"password")," (that we pull from the state)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"dispatch")," function"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"handleLoginChange")," function (where we dispatch ",(0,r.kt)("inlineCode",{parentName:"li"},"updateLogin"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"handlePasswordChange")," function (where we dispatch ",(0,r.kt)("inlineCode",{parentName:"li"},"updatePassword"),")")),(0,r.kt)("p",null,"In fact, that is all...",(0,r.kt)("br",null),"\nWe need to pass the function to the inputs and submit button.",(0,r.kt)("br",null)),(0,r.kt)("p",null,"Let's take a look at how our notifications look, when we do put not a valid email, not a valid password, and when we put the valid data."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"incorrect-login"},"Incorrect Login"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Success",src:n(9422).Z})),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"incorrect-password"},"Incorrect Password"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Success",src:n(7023).Z})),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"you-have-successfully-logged-in"},"You have successfully logged in"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Success",src:n(2726).Z})),(0,r.kt)("br",null))}d.isMDXComponent=!0},9422:function(e,t,n){t.Z=n.p+"assets/images/incorrect-login-2846bf481c43dc86cc3105f576998eae.png"},7023:function(e,t,n){t.Z=n.p+"assets/images/incorrect-password-c051f8a12ce334891261d6f53e7e1598.png"},7265:function(e,t,n){t.Z=n.p+"assets/images/login-form-c3f183c3c2dd317eaf2a03cd8a7f1f9a.png"},2726:function(e,t,n){t.Z=n.p+"assets/images/login-success-46bc9193d8daa99ae1862cc47321a7c4.png"}}]);